<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ğŸ“ˆ ì‚¬ìš©ì ê±°ë˜ ë¦¬í¬íŠ¸</title>
    <link rel="stylesheet" th:href="@{/css/stock-list.css}">
    <script th:src="@{/js/jquery-3.7.1.min.js}"></script>
    <script>
        $(document).ready(function () {
            $(".sortable").each(function (columnIndex) {
                $(this).css("cursor", "pointer").click(function () {
                    let table = $(this).closest("table");
                    let rows = table.find("tbody > tr").toArray();
                    let isAsc = $(this).data("asc") || false;

                    rows.sort(function (a, b) {
                        let A = $(a).children("td").eq(columnIndex).text().trim();
                        let B = $(b).children("td").eq(columnIndex).text().trim();

                        if ($.isNumeric(A) && $.isNumeric(B)) {
                            A = parseFloat(A);
                            B = parseFloat(B);
                        }

                        return isAsc ? (A > B ? -1 : A < B ? 1 : 0) : (A < B ? -1 : A > B ? 1 : 0);
                    });

                    $.each(rows, function (i, row) {
                        table.children("tbody").append(row);
                    });

                    $(".sortable .sort-icon").text("");
                    $(this).find(".sort-icon").text(isAsc ? "â–¼" : "â–²");
                    $(this).data("asc", !isAsc);
                });
            });
        });

        function getUserTradeSummary(){
            $.get()
        }
    </script>
</head>
<body>
<div class="container">
    <h1>ğŸ“Š ì‚¬ìš©ì ì¢…ëª©ë³„ ê±°ë˜ ë¦¬í¬íŠ¸</h1>

    <div class="button-area">
        <a th:href="@{/main}" class="btn-main">ğŸ  ë©”ì¸ í˜ì´ì§€</a>
    </div>

    <table>
        <thead>
        <tr>
            <th class="sortable">ì¢…ëª© ì½”ë“œ<span class="sort-icon"></span></th>
            <th class="sortable">ì¢…ëª© ì´ë¦„<span class="sort-icon"></span></th>
            <th class="sortable">ì´ ë³´ìœ  ìˆ˜ëŸ‰<span class="sort-icon"></span></th>
            <th class="sortable">ìˆœ ê±°ë˜ ê¸ˆì•¡ (ì›)<span class="sort-icon"></span></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="summary : ${tradeSummaries}">
            <td th:text="${summary.stockCode}"></td>
            <td th:text="${summary.stockName}"></td>
            <td th:text="${summary.totalQuantity}"></td>
            <td th:text="${#numbers.formatInteger(summary.netAmount, 3, 'COMMA')}"></td>
        </tr>
        </tbody>
        <tfoot>
        <tr>
            <td colspan="3" style="text-align: right;"><strong>ì´ í•©ê³„:</strong></td>
            <td th:text="${totalTradeSummary != null ? #numbers.formatInteger(totalTradeSummary, 3, 'COMMA') + ' ì›' : '0 ì›'}"></td>
        </tr>
        </tfoot>
    </table>
</div>
</body>
</html>